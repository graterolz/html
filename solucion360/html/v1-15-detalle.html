<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Editar la tarjeta de regalo | Solución 360&#176;</title>
		<link rel="shortcut icon" href="./import/images/icon.png"/>
		<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
		<link href="./import/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<link href="./import/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css" />
		<link href="./import/iCheck/square/green.css" rel="stylesheet" type="text/css" />
		<link href="./import/select2/select2.min.css" rel="stylesheet" type="text/css" />
		<link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/1.10.15/js/jquery.dataTables.css">
		<link href="./import/redactor/redactor.css" rel="stylesheet" type="text/css" />
		<link href="./import/dist/css/jquery-ui.css" rel="stylesheet" type="text/css" />
		<link href="./import/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
		<link href="./import/dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css" />
		<link href="./import/dist/css/custom.css" rel="stylesheet" type="text/css" />
		<link href="./import/iCheck/square/_all.css" rel="stylesheet" type="text/css" />
		<script src="./import/jQuery/jQuery-2.1.4.min.js" type="text/javascript"></script>
	</head>
	<body class="skin-green fixed sidebar-mini">
		<div class="wrapper">
			<!-- </div> tag end in footer file  -->
			<header class="main-header">
				<a href="#" class="logo">
				<span class="logo-mini">POS</span>
				<span class="logo-lg">Solución <b>360&#176;</b></span>
				</a>
				<nav class="navbar navbar-static-top" role="navigation">
					<a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					</a>
					<div class="navbar-custom-menu">
						<ul class="nav navbar-nav">
							<li class="hidden-xs hidden-sm"><a href="#" class="clock"></a></li>
							<li class="dropdown user user-menu" style="padding-right:5px;">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">
								<img src="./images/male.png" class="user-image" alt="Avatar" />
								<span class="hidden-xs">Admin Admin</span>
								</a>
								<ul class="dropdown-menu" style="padding-right:3px;">
									<li class="user-header">
										<img src="./images/male.png" class="img-circle" alt="Avatar" />
										<p>
											admin@simple-ti.com                                    <small>Miembro desde 24/06/2015 10:59 PM</small>
										</p>
									</li>
									<li class="user-footer">
										<div class="pull-left">
											<a href="#" class="btn btn-default btn-flat">Editar usuario</a>
										</div>
										<div class="pull-right">
											<a href="#" class="btn btn-default btn-flat">Desconectar</a>
										</div>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</nav>
			</header>
			<aside class="main-sidebar">
				<section class="sidebar">
					<ul class="sidebar-menu">
						<li id="mm_bienvenida_index"><a href="#"><i class="fa fa-folder-o"></i> <span>Bienvenida</span></a></li>
						<li id="mm_auditoria"><a href="#"><i class="fa fa-eye"></i> <span>Auditoría</span></a></li>
						<li id="mm_opcion"><a href="#"><i class="fa fa-folder-open-o"></i> <span>Opción</span></a></li>
						<li class="treeview" id="mm_perfil">
							<a href="#"><i class="fa fa-unlock-alt"></i><span>Perfil</span><i class="fa fa-angle-left pull-right"></i></a>
							<ul class="treeview-menu">
								<li id="mm_perfil_index"><a href="#"><i class="fa fa-circle-o"></i>Listar perfil</a></li>
								<li id="mm_perfil_add"><a href="#"><i class="fa fa-circle-o"></i>Ingresar perfil</a></li>
							</ul>
						</li>
						<li id="mm_parametro"><a href="#"><i class="fa fa-cogs"></i> <span>Parámetros</span></a></li>
						<li class="treeview" id="mm_usuario">
							<a href="#"><i class="fa fa-user"></i><span>Usuario</span><i class="fa fa-angle-left pull-right"></i></a>
							<ul class="treeview-menu">
								<li id="mm_usuario_index"><a href="#"><i class="fa fa-circle-o"></i>Listar Usuario</a></li>
								<li id="mm_usuario_add"><a href="#"><i class="fa fa-circle-o"></i>Ingresar Usuario</a></li>
							</ul>
						</li>
						<li class="treeview" id="mm_empleado">
							<a href="#"><i class="fa fa-user"></i><span>Empleado</span><i class="fa fa-angle-left pull-right"></i></a>
							<ul class="treeview-menu">
								<li id="mm_empleado_index"><a href="#"><i class="fa fa-circle-o"></i>Listar Empleado</a></li>
								<li id="mm_empleado_add"><a href="#"><i class="fa fa-circle-o"></i>Ingresar Empleado</a></li>
							</ul>
						</li>
						<li class="treeview" id="mm_externo">
							<a href="#"><i class="fa fa-user"></i><span>Personal externo</span><i class="fa fa-angle-left pull-right"></i></a>
							<ul class="treeview-menu">
								<li id="mm_externo_index"><a href="#"><i class="fa fa-circle-o"></i>Listar personal externo</a></li>
								<li id="mm_externo_add"><a href="#"><i class="fa fa-circle-o"></i>Ingresar personal externo</a></li>
							</ul>
						</li>
						<li class="treeview" id="mm_tiposeguro">
							<a href="#"><i class="fa fa-folder-open"></i><span>Tipo seguro</span><i class="fa fa-angle-left pull-right"></i></a>
							<ul class="treeview-menu">
								<li id="mm_tiposeguro_index"><a href="#"><i class="fa fa-circle-o"></i>Listar tipo seguro</a></li>
								<li id="mm_tiposeguro_add"><a href="#"><i class="fa fa-circle-o"></i>Ingresar tipo seguro</a></li>
							</ul>
						</li>
						<li class="treeview" id="mm_agrupacion">
							<a href="#"><i class="fa fa-users"></i><span>Agrupación</span><i class="fa fa-angle-left pull-right"></i></a>
							<ul class="treeview-menu">
								<li id="mm_agrupacion_index"><a href="#"><i class="fa fa-circle-o"></i>Listar agrupación</a></li>
								<li id="mm_agrupacion_add"><a href="#"><i class="fa fa-circle-o"></i>Ingresar agrupación</a></li>
							</ul>
						</li>
					</ul>
				</section>
			</aside>
			<div class="content-wrapper">
				<!-- </div> tag end in footer file  -->
				<section class="content-header">
					<h1>Editar la tarjeta de regalo</h1>
					<ol class="breadcrumb">
						<li><a href="#"><i class="fa fa-dashboard"></i> Inicio</a></li>
						<li><a href="#">Tarjeta de regalo</a></li>
						<li class="active">Editar la tarjeta de regalo</li>
					</ol>
				</section>
				<div class="col-lg-12 alerts">
				</div>
				<section class="content">
					<div class="row">
						<div class="col-lg-12">
							<div class="nav-tabs-custom">
								<ul class="nav nav-tabs">
									<li class="active"><a data-toggle="tab" href="#enter_data">Editar</a></li>
									<li><a data-toggle="tab" href="#view_audit">Auditoría</a></li>
								</ul>
								<div class="tab-content">
									<!-- INI - 201600804: Listado de los campos del formulario  -->
									<div id="enter_data" class="tab-pane active">
										<div class="col-lg-12">
											<div class="box-header">
												<h3 class="box-title">Por favor actualice la siguiente información</h3>
											</div>
											<form action="#" class="validation" role="form" method="post" accept-charset="utf-8">
												<input type="hidden" name="gri_token" value="dc8468b6e43b06689cd194b72fe58247" style="display:none;" />
												<div class="row">
													<input type='hidden' name='txhTipo' id='txhTipo' value=''>
													<div class="col-sm-12">
														<!--  1era linea -->
														<div class="col-sm-2">
															<div class="form-group">
																<label class="control-label" for="user">Nro.de tarjeta&nbsp;*</label>
															</div>
														</div>
														<div class="col-sm-4">
															<div class="form-group">
																<div class="input-group">
																	<input type="text" name="txtCardNro" value="5297 3767 4409 3473"  class="form-control" style="text-align: right;" id="txtCardNro"  required />
																	<div class="input-group-addon" style="padding-left: 10px; padding-right: 10px;">
																		<a href="#" id="lnkGeneraNro"><i class="fa fa-cogs"></i></a>
																	</div>
																</div>
															</div>
														</div>
														<div class="col-sm-2">
															<div class="form-group">
																<label class="control-label" for="user">Fecha de caducidad&nbsp;*</label>
															</div>
														</div>
														<div class="col-sm-4">
															<div class="form-group">
																<div class="input-group date" id="dpcFechaExpiracion">
																	<input type="text" name="txtFechaExpiracion" value="01/12/2016"  class="form-control datetimepicker" style="display:inline; position: relative;" id="txtFechaExpiracion"  required />
																	<div class="input-group-addon" style="padding-left: 10px; padding-right: 10px;">
																		<span class="glyphicon glyphicon-calendar"></span>
																	</div>
																</div>
															</div>
														</div>
													</div>
													<div class="col-sm-12">
														<!--  2da linea --> 
														<div class="col-sm-2">
															<div class="form-group">
																<label class="control-label" for="user">Precio&nbsp;*</label>
															</div>
														</div>
														<div class="col-sm-4">
															<div class="form-group">			
																<input type="text" name="txtPrecio" value="240.00"  class="form-control" style="text-align: right;" id="txtPrecio"  required />
															</div>
														</div>
														<div class="col-sm-2">
															<div class="form-group">
																<label class="control-label" for="user">Valor&nbsp;*</label>
															</div>
														</div>
														<div class="col-sm-4">
															<div class="form-group">			
																<input type="text" name="txtValor" value="220.00"  class="form-control" style="text-align: right;" id="txtValor"  required />
															</div>
														</div>
													</div>
													<div class="col-sm-12">
														<!--  3era linea --> 
														<div class="form-group">
															<input type="submit" name="btnGuardar" value="Guardar"  onsubmit="javascript: return fncGuardar();" class="btn btn-primary"id="btnGuardar" />
															<button name="btnEliminar" type="button"  onclick="javascript: fncEliminar();" class="btn btn">Eliminar</button>
															<button name="btnRegresar" type="button"  onclick="javascript: fncRegresar();" class="btn btn">Regresar</button>
														</div>
													</div>
												</div>
										</div>
									</div>
									<!-- FIN - 201600804: Listado de los campos del formulario  -->
									<!-- INI - 201600831: Revisión de la información de auditoria  -->
									<div id="view_audit" class="tab-pane">
									<style media="all" type="text/css">
									.alignCenter { text-align: center; }
									.alignRight  { text-align: right;  }
									</style>
									<script type="text/javascript">
										$(document).ready(function () {
										
										var oDataTable = $('#fileData').dataTable({
											"aLengthMenu": [[10, 25, 50], [10, 25, 50]],
											"aaSorting": [[ 2, "desc" ]], 
											"iDisplayLength": 10,
											"processing": true, 
											"serverSide": true,
											"pagingType": "full_numbers",
											bAutoWidth	: false,
										
											"language": {
												"lengthMenu": dataTablePluginLang.lengthMenu,
												"search": dataTablePluginLang.search,
												"zeroRecords": dataTablePluginLang.zeroRecords,
												"info": dataTablePluginLang.info,
												"infoEmpty": dataTablePluginLang.infoEmpty,
												"infoFiltered": dataTablePluginLang.infoFiltered,
												
												"paginate": {
													"first": dataTablePluginLang.first,
													"next": dataTablePluginLang.next,
													"previous": dataTablePluginLang.previous,
													"last": dataTablePluginLang.last
												}
											},	
										
										"ajax": "./auditoria.json",
										"columns": [
											{"data":"ci_codigoAuditoria", "name":"aud.ci_codigoAuditoria", "sClass":"alignCenter"},
											{"data":"updated_by", "name":"CONCAT(usr.last_name, usr.first_name)"},
											{"data":"cf_fechaRegistro", "name":"aud.cf_fechaRegistro", "sClass":"alignCenter", "render":hrld},
											{"data":"ci_codigoOpcion", "name":"aud.ci_codigoOpcion"},
											{"data":"cc_accion", "name":"aud.cc_accion", "render":jsAuditAction},
											{"data":"ci_codigoColumna", "name":"det.ci_codigoColumna"},
											{"data":"cv_valorAnterior", "name":"det.cv_valorAnterior", "sClass":"alignRight"},
											{"data":"cv_valorNuevo", "name":"det.cv_valorNuevo", "sClass":"alignRight"}
										]
										});	
										
										}); 
										
									</script>
									<input type="hidden" name="txhOpcion" id="txhOpcion"value="24" />
									<input type="hidden" name="txhRegistro" id="txhRegistro"value="23" />
									<div class="col-lg-12">
									<div class="white-panel">
									<div class="box-header">
									<h3 class="box-title">El siguiente cuadro muestra la información de la auditoria del registro.</h3>
									</div>
									<div class="table-responsive">
									<table id='fileData' class="table table-striped table-bordered table-condensed table-hover" style="margin-bottom:5px;" width="100%">
									<thead>
									<tr class="active">
									<th class=col-xs-1>Id</th><th class=col-xs-2>Usuario</th><th class=col-xs-1>Fecha registro</th><th class=col-xs-1>Opcion</th><th class=col-xs-1>Accion</th><th class=col-xs-1>Codigo columna</th><th class=col-xs-1>Valor anterior</th><th class=col-xs-1>Valor nuevo</th>				</tr>
									</thead>
									<tbody>
									<tr>
									<td colspan="8" class="dataTables_empty">Cargando los datos desde el servidor, por favor espere.</td>
									</tr>
									</tbody>
									</table>
									</div>
									<div class="clearfix"></div>
									<div class="col-sm-12"> <!--  3era linea --> 
									<div class="form-group">
									<button name="btnRefrescar" type="button"  id="btnRefrescar" class="btn btn-primary">Refrescar</button>
									</div>
									</div>
									</div>
									</div>
									</div>
									<div class="clearfix"></div>
									<!-- FIN - 201600831: Revisión de la información de auditoria  -->
								</div>
								</form>			
							</div>
						</div>
					</div>
				</section>
				<script src="./import/input-mask/jquery.inputmask.js" type="text/javascript"></script>
			</div>
			<!-- </div> tag start in header file - class="content-wrapper" -->
			<div class="modal" data-easein="flipYIn" id="posModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>
			<footer class="main-footer">
				<div class="pull-right hidden-xs">
					<!-- Version <strong>4.0</strong> //-->
					<p class="footer">Page rendered in <strong>0.1689</strong> seconds. CodeIgniter Version <strong>3.1.0</strong></p>
				</div>
				Copyright &copy; 2016 Solución <b>360&#176;</b>. Todos los derechos reservados.
			</footer>
		</div>
		<!-- </div> tag start in header file - class="wrapper" -->
		<div id="ajaxCall"><i class="fa fa-spinner fa-pulse"></i></div>
		<script type="text/javascript">
			// Opciones que se muestran en la auditoria de la aplicación
			var AuditOptions = {
				'LGN' : 'Ingresó',
				'FND' 	: 'Búsqueda',
				'VIE' 	: 'Se revisó',
				'ADD' 	: 'Se agregó',
				'UPD': 'Se actualizó',
				'DLT': 'Se eliminó',
				'REV': 'Se revirtió',
				'': 'No definido',
			};
			// Funcion que traslada la auditoria en el componente DataTable
			function jsAuditAction(data, type, row, meta) {
				if(data !== null) {
					lsCadena = AuditOptions[row.cc_accion];
					return lsCadena;
				}
				return 'No definido';
			}
			
			var dataTablePluginLang = {
				// datos de configuración generica del control dataTable
				lengthMenu 		: "Ver&nbsp;&nbsp;_MENU_&nbsp;&nbsp;registros por pagina", 	
				search 			: "Buscar:&nbsp;&nbsp;_INPUT_", 	
				zeroRecords 	: "No se encontraron registros", 	
				info 			: "Viendo _START_ al _END_ de _TOTAL_ registros", 	
				infoEmpty 		: "Viendo 0 al 0 de 0 registros", 	
				infoFiltered 	: "(filtrado de _MAX_ registros en total)", 	
				// variables para la paginacion de registros
				first 			: "<i class='fa fa-fw fa-fast-backward'>", 	
				next 			: "<i class='fa fa-fw fa-step-forward'>", 	
				previous 		: "<i class='fa fa-fw fa-step-backward'>", 	
				last 			: "<i class='fa fa-fw fa-fast-forward'>"	
			};
			
			var base_url = 'http://dev.ciaseguros.pe/';
			var dateformat = 'd/m/Y', timeformat = 'h:i A';
			var Settings = {"created_by":null,"created_at":null,"updated_by":null,"updated_at":null,"logo":null,"site_name":"Soluci\u00f3n <b>360&#176;<\/b>","tel":"0105292122","dateformat":"d\/m\/Y","timeformat":"h:i A","language":"spanish","theme":"default","mmode":"0","captcha":"0","currency_prefix":"S\/.","default_customer":"1","default_tax_rate":"18%","rows_per_page":"10","total_rows":"30","header":"<h2>Soluci\u00f3n <b>360&#176;<\/b><\/h2>Jr. Hualcan 1210, Urb. Covida,<br>Los Olivos, Lima<br>","footer":"\u00a1Gracias por su compra!\r\n<br>","bsty":"3","display_kb":"0","default_category":"5","default_discount":"10","item_addition":"1","barcode_symbology":"code39","pro_limit":"10","decimals":"2","thousands_sep":",","decimals_sep":".","focus_add_item":"ALT+F1","add_customer":"ALT+F2","toggle_category_slider":"ALT+F10","cancel_sale":"ALT+F5","suspend_sale":"ALT+F6","print_order":"ALT+F11","print_bill":"ALT+F12","finalize_sale":"ALT+F8","today_sale":"Ctrl+F1","open_hold_bills":"Ctrl+F2","close_register":"ALT+F7","java_applet":"0","receipt_printer":"Microsoft Print to PDF","pos_printers":"Microsoft Print to PDF","cash_drawer_codes":"","char_per_line":"42","rounding":"1","pin_code":"22c14f311a60486b36f79f3bc962be66","purchase_code":"65daf704-3c87-495c-a65a-f34d83ade6ca","envato_username":"jaime-nicoll"};
			
		</script>		
		<script src="./import/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
		<script type="text/javascript" charset="utf8" src="http://cdn.datatables.net/1.10.15/js/jquery.dataTables.js"></script>
		<script src="./import/slimScroll/jquery.slimscroll.min.js" type="text/javascript"></script>
		<script src="./import/fastclick/fastclick.min.js" type="text/javascript"></script>
		<script src="./import/redactor/redactor.min.js" type="text/javascript"></script>
		<script src="./import/iCheck/icheck.min.js" type="text/javascript"></script>
		<script src="./import/select2/select2.full.min.js" type="text/javascript"></script>
		<script src="./import/dist/js/common-libs.js" type="text/javascript"></script>
		<script src="./import/dist/js/app.min.js" type="text/javascript"></script>
		<script src="./import/dist/js/custom.js" type="text/javascript"></script>
		<!--<script src="./import/dist/js/pages/all.js" type="text/javascript"></script>-->
	</body>
</html>